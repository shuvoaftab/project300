<VirtualHost 192.168.101.129:8181>
	ServerName nodejs.ibrahimsharif.com
	ServerAlias www.nodejs.ibrahimsharif.com
	ServerAdmin webmaster@nodejs.ibrahimsharif.com
	DocumentRoot /home/nodejs/public_html
	UseCanonicalName Off
	ScriptAlias /cgi-bin/ /home/nodejs/public_html/cgi-bin/

	#CustomLog /usr/local/apache/domlogs/nodejs.ibrahimsharif.com.bytes bytes
	#CustomLog /usr/local/apache/domlogs/nodejs.ibrahimsharif.com.log combined
	ErrorLog /usr/local/apache/domlogs/nodejs.ibrahimsharif.com.error.log

	# Custom settings are loaded below this line (if any exist)
	# IncludeOptional "/usr/local/apache/conf/userdata/nodejs/nodejs.ibrahimsharif.com/*.conf"

	<IfModule mod_setenvif.c>
		SetEnvIf X-Forwarded-Proto "^https$" HTTPS=on
	</IfModule>

	<IfModule mod_userdir.c>
		UserDir disabled
		UserDir enabled nodejs
	</IfModule>

	<IfModule mod_suexec.c>
		SuexecUserGroup nodejs nodejs
	</IfModule>

	<IfModule mod_suphp.c>
		suPHP_UserGroup nodejs nodejs
		suPHP_ConfigPath /home/nodejs
	</IfModule>

	<IfModule mod_ruid2.c>
		RMode config
		RUidGid nodejs nodejs
	</IfModule>

	<IfModule itk.c>
		AssignUserID nodejs nodejs
	</IfModule>

	<Directory "/home/nodejs/public_html">
		Options -Indexes -FollowSymLinks +SymLinksIfOwnerMatch
		AllowOverride All Options=ExecCGI,Includes,IncludesNOEXEC,Indexes,MultiViews,SymLinksIfOwnerMatch
	</Directory>
	
	<IfModule mod_proxy.c>
		ProxyRequests Off
		ProxyPreserveHost On
		ProxyVia Full
		ProxyPass / http://127.0.0.1:3000/
		ProxyPassReverse / http://127.0.0.1:3000/

		<Proxy *>
			AllowOverride All
		</Proxy>
	</IfModule>
</VirtualHost>

<VirtualHost 192.168.101.129:8181>
	ServerName webmail.nodejs.ibrahimsharif.com

	<IfModule mod_proxy.c>
		ProxyRequests Off
		ProxyPreserveHost On
		ProxyVia Full
		ProxyPass / http://127.0.0.1:2095/
		ProxyPassReverse / http://127.0.0.1:2095/

		<Proxy *>
			AllowOverride All
		</Proxy>
	</IfModule>

	<IfModule mod_security2.c>
		SecRuleEngine Off
	</IfModule>

</VirtualHost>

<VirtualHost 192.168.101.129:8181>
	ServerName mail.nodejs.ibrahimsharif.com

	<IfModule mod_proxy.c>
		ProxyRequests Off
		ProxyPreserveHost On
		ProxyVia Full
		ProxyPass / http://127.0.0.1:2095/
		ProxyPassReverse / http://127.0.0.1:2095/

		<Proxy *>
			AllowOverride All
		</Proxy>
	</IfModule>

	<IfModule mod_security2.c>
		SecRuleEngine Off
	</IfModule>

</VirtualHost>

<VirtualHost 192.168.101.129:8181>
	ServerName cpanel.nodejs.ibrahimsharif.com

	<IfModule mod_proxy.c>
		<IfModule !ssl_module>
			LoadModule ssl_module modules/mod_ssl.so
		</IfModule>
		SSLProxyEngine on
		SSLProxyVerify none
		SSLProxyCheckPeerCN off
		SSLProxyCheckPeerName off
		SSLProxyCheckPeerExpire off
		ProxyRequests Off
		ProxyPreserveHost On
		ProxyVia Full

		RewriteEngine on

		RewriteRule ^/roundcube$ /roundcube/ [R]
		ProxyPass /roundcube/ https://127.0.0.1:2031/roundcube/
		ProxyPassReverse /roundcube https://127.0.0.1:2031/roundcube/

		RewriteRule ^/pma$ /pma/ [R]
		ProxyPass /pma/ https://127.0.0.1:2031/pma/
		ProxyPassReverse /pma https://127.0.0.1:2031/pma/
		
		ProxyPass / https://127.0.0.1:2083/
		ProxyPassReverse / https://127.0.0.1:2083/

		<Proxy *>
			AllowOverride All
		</Proxy>
	</IfModule>

	<IfModule mod_security2.c>
		SecRuleEngine Off
	</IfModule>
	
</VirtualHost>